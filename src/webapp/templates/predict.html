<html>
<meta name="viewport"
    content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">

<head>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.css" type="text/css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis-network.min.js"> </script> -->
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous">
    </script>
    <script src="{{ url_for('static',filename='js/utils.js') }}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css"
        integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js"
        integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/navigation.css') }}">

    <style type="text/css">
        #network {
            width: 100%;
            height: 50%;
            background-color: #ffffff;
            border: 10px solid lightgray;
            position: relative;
            margin: 0 auto;
        }

        .information {
            width: 80%;
            height: fit-content;
            margin: 0 auto;
        }

        .main {
            width: 70%;
            height: 100%;
            margin: 0 auto;
            margin-top: 5%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .nav {
            width: 80%;
            margin-top: 1%;
        }

        #interaction {
            width: 100%;
            margin: 0 auto;
            margin-top: 5%;
        }


        body {
            font-size: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: linear-gradient(to bottom, #ba5370, #f4e2d8);
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>

<body>
    <div class="nav">
        <div class="page">
            <nav class="page__menu menu">
                <ul class="menu__list r-list">
                    <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">MODELING</a></li>
                    <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">QUERY</a></li>
                    <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">EXPLORE</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="main">

        <div id="network">
            <div id="mynetwork" @click="click"></div>
        </div>
        <div id="interaction">
            <div id="query" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
                <div style="width:100%">
                    <label for="inp" class="inp">
                        <input type="text" id="inp" placeholder="&nbsp;">
                        <span class="label">Query</span>
                        <span class="focus-bg"></span>
                    </label>
                </div>
                <div >
                    <button class="btn-1" id="app" @click="send">Send</button>
                </div>
            </div>

            <div id="info">
                <h1>Information</h1>
                <div>
                    <div v-for="(v, k) in content">
                        <h2>{[ k ]}</h2>
                        <p>{[ v ]}</p>
                    </div>
                </div>
            </div>

            <details class="custom-select">
                <summary class="radios">
                    <input type="radio" name="item" id="default" title="Select component type" checked>
                    <input type="radio" name="item" id="item1" title="Component">
                    <input type="radio" name="item" id="item2" title="Software">
                    <input type="radio" name="item" id="item3" title="Hardware">
                    <input type="radio" name="item" id="item4" title="Firmware">
                    <input type="radio" name="item" id="item5" title="Entry point">
                    <input type="radio" name="item" id="item6" title="Operation system">
                </summary>
                <ul class="list" id="selection">
                    <li id="selection">
                        <label for="item1">
                            Item 1
                            <span></span>
                        </label>
                    </li>
                    <li id="selection">
                        <label for="item2">Item 2</label>
                    </li>
                    <li id="selection">
                        <label for="item3">Item 3</label>
                    </li>
                    <li id="selection">
                        <label for="item4">Item 4</label>
                    </li>
                    <li id="selection">
                        <label for="item5">Item 5</label>
                    </li>
                </ul>
            </details>

        </div>
    </div>

    <script src="{{ url_for('static',filename='js/new_create.js') }}"></script>
    <script type="text/javascript">
        new Vue({
            el: "#app",
            methods: {
                send() {
                    var cve = document.getElementById("inp").value;
                    var role = {
                        "cve": cve
                    };
                    var url = "/predict/submit";
                    axios({
                        method: 'post',
                        url: '/predict/submit',
                        data: role
                    }).then(function (res) {
                        console.log(res.data);
                        var nodes = res.data.nodes;
                        var edges = res.data.edges;
                        nodes = new vis.DataSet(nodes);
                        edges = new vis.DataSet(edges);
                        network = drawGraph(nodes, edges);
                        if (network) {
                            network.on('click', function (params) {
                                if (params.nodes.length != 0) {
                                    var nodeID = params.nodes[0];
                                    if (nodeID) {
                                        clickedNode = nodes.get(nodeID);
                                    }
                                    // content = clickedNode.id
                                    info.content = clickedNode
                                }
                            })
                        }
                    });
                }
            }
        });
    </script>

    <script src="{{ url_for('static',filename='js/create_graph.js') }}"></script>
</body>

</html>