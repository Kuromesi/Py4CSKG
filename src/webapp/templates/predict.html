<html>
<meta name="viewport"
    content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">

<head>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.css" type="text/css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis-network.min.js"> </script> -->
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.7.0/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>
    <script src="{{ url_for('static',filename='js/utils.js') }}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/navigation.css') }}">

    <style type="text/css">
        #network {
            width: 100%;
            height: 50%;
            background-color: #ffffff;
            border: 10px solid lightgray;
            position: relative;
            margin: 0 auto;
        }

        .information {
            width: 80%;
            height: fit-content;
            margin: 0 auto;
        }

        .main {
            width: 80%;
            height: 100%;
            margin: 0 auto;
            margin-top: 5%;
        }

        body {
            background-image: linear-gradient(to bottom, #ba5370, #f4e2d8);
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>

<body>
    <div class="main">

        <div id="network">
            <div id="mynetwork"></div>
        </div>

        <input class="c-checkbox" type="checkbox" id="checkbox">
        <div class="c-formContainer">
            <form class="c-form" action="">
                <input class="c-form__input" placeholder="CVE description" id="cve">
                <label class="c-form__buttonLabel" for="checkbox">
                    <button class="c-form__button" id="app" type="button" @click="send">Query</button>
                </label>
                <label class="c-form__toggle" for="checkbox" data-title="Input"></label>
            </form>
        </div>

        <div class="information">
            <div id="object">
                Object
                <div v-for="(v, k) in content">
                    <p>{[ k ]}: {[ v ]}</p>
                    <textarea v-model="content[k]"></textarea>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static',filename='js/new_create.js') }}"></script>
    <script type="text/javascript">
        new Vue({
            el: "#app",
            methods: {
                send() {
                    var cve = document.getElementById("cve").value;
                    var role = {
                        "cve": cve
                    }; 
                    var url = "/predict/submit";
                    axios({
                        method: 'post',
                        url: '/predict/submit',
                        data: role
                    }).then(function (res) {
                        console.log(res.data);
                        var nodes = res.data.nodes;
                        var edges = res.data.edges;
                        nodes = new vis.DataSet(nodes);
                        edges = new vis.DataSet(edges);
                        network = drawGraph(nodes, edges);
                    });
                }
            }
        });
    </script>
    
    <script src="{{ url_for('static',filename='js/create_graph.js') }}"></script>
</body>

</html>